
hdwiki
记录 
---------------------------------
index.php
-----------------------------------
index.php
	doc-veiw-50.html

入口
microtiome为秒速

时间日志 开始 log中

1.错误
2.开始时间
3.常量
4.载入model
5.创建对象 执行
=========================================

model.hdwiki.class.php
---------------------------------------
配置文件 config.php 数据相关
字符串   /lib/string.class.php 数据处理，公共字符串处理函数
基础类  /model/base.class.php 

function hdwiki() /*请求参数基本处理，路由*/
//php4兼容
//初始化 引用
//载入控制器

init_request()/*解析数据*/
// 安装
// 编码
// 全局 编码安全 urlecode $_SERVER['query_string']
// 插件处理 plugin
// $this->get=expload('-',$querystirng) doc-view-50.html 参数传递 
// get[0] doc 控制器名  get[1] default 方法名
// haddslashes($this->get) 
// checkscrury() 过滤敏感词
// 

load_contorl() /*引入数据  */
//plugins 先忽略
// $controlfile  $this->get[0].php 
// false==indelcude($controlfile)


funciton run()/* 初始化 */
//$control = new control() //doc.php list.php  只载入一个控制器 是否同名无所谓
//$mdethod =$this->get[1]
//$method= 'do'.$this->get[1] //安全性
//method_exists($control,$medhod) //检查
//
//new doc.php->doview()

=================================================

doc.php 继承base.class.php
----------------------------
//extend base.class.php
//
//control()
//load() 载入对象  看是否公用，可以单独加载哪里用哪里加载
//doview() 业务逻辑处理
/*
引入
数据校验
具体参数校验 局部校验
参数

权限校验

取数据

拼装处理数据 

调用模版展示

数据初始化，cookie，ip base

*/
// 
//  
============================

model.base.class.php /* 数据 */
---------------------------------------------
//无继承
// 应用公共
// load() model 对象载入 require /model/$model.class.php
// init_db()
// init_cache()
// init_template() hgetcookie('theme') 
//   new temple() //lib template.class.php无传入dafault 
//   tplname tpldir objdir解析之后 /data/view 返回给用户
// setlang() 
// $this->view->assign()//assign 视图对象属性 无则全局变量
// display() 结束时间micritime()
// extract() 释放
// $this->gettpl($file)
//complie() $this->lang() //完成编译	
//	function lang() $this->lang[$k]
//	function loosection() freach
//

=============================================
// 用户登录 多层继承或直接 放在base 全局控制 
// 动态调用-ajax-cookie（多了一个次http请求）  静态调整 缓存
==============================================

//request 请求的处理 找到不同的路由 找到就new /class 过滤 /路由到control 是否分层 model 是否 视图
//

取数据 数据库 单独设置  select* 




多台服务器部署 要改的地方 共享的时候
1.数据库   读写分离  表结构  手动查找 select关键字
2.session  共享  nfs  memcacehe  数据库 
3.上传文件 nfs  单独服务器-附件服务   异步返回地址 
4.缓存
5.业务的精简 
6.结构体系 登录sso单点登录
7.模版

Discuz
forum.php?mod=viewhtread&tid=1&extra=page
home.php?mod=follow
group.php
非完整mvc 历史原因

admin.php
api.php
connect.php
cp.php
forum.php
group.php
index.php
memeber.php
misc.php

|archiver 
|data
|source
|static
|template
|uc_client
|uc_server

先生成基础的数据，再载入

forum.php
----------------------
require: //核心载入
source/class/class_core.php //基础数据
	function_forum.php

$modarray //白名单 请求处理检查 校验
$cachelist 缓存
C::app->cachelist
C::app->init;初始化 ---diszess_applictation 中init()
loadforum() //取数据 拼装数据
set_rssauth() rss验证
runhooks() 钩子
$navtitile 导航
source/module/forum/forum_$mod.php
=======================

class_croe.php //业务结构的
-------------------------
error_reporting(E_ALL);
配置
set_exception_handler()//core,hanleExceprtion 异常信息处理 日志 程序异常

debug 模式 
php抛出的异常 waring

function_exists() //判断函数是否存在
function handleException() descuze_error::
C extends core{}
DB extends diszss_ {}
C::crateapp()
function crateappp()//is_object(self::$_app) 生成一个对象

=========================

discuz_appliication.php
--------------------
function &instance()

init_ent()  //初始化
数组再组合glob $_G
$this->var =$_G

init_output()// 初始化输出 dstripslashes($_GET) 魔术引号 输出之前的操作
$GLOBALS[] =NULL unset($GLOBALS)
$_SERVER[HTTP_ACCEPT_ENCODING]
$this->conifg['output']['gzip']

init()

====================

function_forum.php
-----------------------
loadforum()

==========================

forum_forumdisplay.php
----------------
帖子相关数据
include template($template)

================
所在用优先级 不同层级不同操作 
环境基础数 
据业务周期数据 
业务模块数据 

wordpress
index.php
------------
wp-blog-header.php
=====================

wp-blog-header.php
----------------------
wp-load.php
wp();
template-loader.php
======================
wp-load.php
------------
conifg
error
===============
config.php
----------------
wp-settings.php
=================

兼容性 
处理问题
